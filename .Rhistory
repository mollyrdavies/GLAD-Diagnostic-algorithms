knitr::opts_chunk$set(echo = TRUE)
#rm(list = ls())
library(knitr)
library(tidyverse)
library(car)
library(psych)
library(lubridate)
library(broom)
library(ggfortify)
library(summarytools)
library(ggformula)
library(data.table)
#Source raw data directory (raw_path) & clean data export directory (cleaned_path)
source("../GLAD_data_path.R")
SPEC_file <- paste(raw_path, "SPEC.rds", sep = "")
SPEC.cc <- read_rds(SPEC_file)
head(SPEC.cc)
SPEC.items <- SPEC.cc %>%
select(ID,
spec.vomit_phobia,
spec.environment_phobia,
spec.situation_phobia,
spec.animal_phobia,
spec.blood_injection_phobia,
spec.other_phobia,
spec.avoid_phobias,
spec.endure_phobias_with_anxiety,
spec.phobia_frequency,
spec.age_first_phobia,
spec.age_most_recent_phobia,
spec.phobia_lasted,
spec.phobia_interfered,
spec.phobia_out_of_proportion)
#Change all prefer not to answers and don't knows to NA
SPEC.items[SPEC.items == "Don't know"] <- NA
SPEC.items[SPEC.items == "Prefer not to answer"] <- NA
SPEC.items[SPEC.items == "Seen but not answered"] <- NA
#Criterion A screening variable
SPEC.items <- SPEC.items %>%
mutate(specific_phobia_screener_numeric =
case_when(
spec.environment_phobia == "No" & spec.situation_phobia == "No" & spec.animal_phobia == "No" & spec.blood_injection_phobia == "No" & spec.other_phobia == "No" ~ 0,
!is.na(spec.phobia_frequency) & (spec.phobia_frequency == "Never" | spec.phobia_frequency == "Only one or two times ever" | spec.phobia_frequency == "Some of the time") ~ 0,
spec.environment_phobia == "Yes" | spec.situation_phobia == "Yes" | spec.animal_phobia == "Yes" | spec.blood_injection_phobia == "Yes" | spec.other_phobia == "Yes" & (spec.phobia_frequency == "Almost always" | spec.phobia_frequency == "Always") ~ 1,
is.na(spec.environment_phobia) & is.na(spec.situation_phobia) & is.na(spec.animal_phobia) & is.na(spec.blood_injection_phobia) & is.na(spec.other_phobia) | is.na(spec.phobia_frequency) ~ NA_real_
))
#Criterion A screening variable (NA coded as 0)
## This variable is created to remove NAs solely for the purpose of coding the variable in the following chunk (spec.specific_phobia_screen.calc.NA)
SPEC.items$specific_phobia_screener_numeric_noNA <- with(SPEC.items,
ifelse(is.na(specific_phobia_screener_numeric), 0, specific_phobia_screener_numeric))
summary(as.factor(SPEC.items$specific_phobia_screener_numeric))
summary(as.factor(SPEC.items$specific_phobia_screener_numeric_noNA))
